<app-sidebar></app-sidebar>
<div class="main-content">
  <div class="demo-table-container">
    <div class="example-button-container">
      <button mat-mini-fab color="primary" aria-label="Example icon button with a plus one icon"
        [routerLink]="['/add']">
        <mat-icon>add</mat-icon>
      </button>
    </div>

    <table mat-table [dataSource]="stories" class="mat-elevation-z8 demo-table">
      <!-- Position Column -->
      <ng-container matColumnDef="Id">
        <th mat-header-cell *matHeaderCellDef>Id</th>
        <td mat-cell *matCellDef="let story" id="story_id">{{story.storyId}}</td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="Title">
        <th mat-header-cell *matHeaderCellDef>Title</th>
        <td mat-cell *matCellDef="let story">{{story.title}}</td>
      </ng-container>

      <ng-container matColumnDef="Description">
        <th mat-header-cell *matHeaderCellDef>Description</th>
        <td mat-cell *matCellDef="let story">{{story.description}}</td>
      </ng-container>

      <ng-container matColumnDef="Status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let story">{{story.status.statusName}}</td>
      </ng-container>

      <ng-container matColumnDef="Priority">
        <th mat-header-cell *matHeaderCellDef>Priority</th>
        <td mat-cell *matCellDef="let story">{{story.priority.priorityLevel}}</td>
      </ng-container>

      <ng-container matColumnDef="Story Type">
        <th mat-header-cell *matHeaderCellDef>Story Type</th>
        <td mat-cell *matCellDef="let story">{{story.type.storyType}}</td>
      </ng-container>

      <ng-container matColumnDef="Created On">
        <th mat-header-cell *matHeaderCellDef>Created On</th>
        <td mat-cell *matCellDef="let story">{{story.createdDate}}</td>
      </ng-container>

      <ng-container matColumnDef="Options">
        <th mat-header-cell *matHeaderCellDef>Update/Delete</th>
        <td mat-cell *matCellDef="let story">
          <div *ngIf="story.status.statusName == 'Completed'">
            <button mat-mini-fab aria-label="Example icon button with a update icon"
              [routerLink]="'update/'+story.storyId" class="update-delete-buttons" disabled>
              <mat-icon>create</mat-icon>
            </button>
            <button mat-mini-fab color="warn" aria-label="Example icon button with a delete icon" disabled
              (click)="deleteStory(story.storyId)">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
          <div *ngIf="story.status.statusName != 'Completed'">
            <button mat-mini-fab aria-label="Example icon button with a update icon"
              [routerLink]="'update/'+story.storyId" class="update-delete-buttons">
              <mat-icon>create</mat-icon>
            </button>
            <button mat-mini-fab color="warn" aria-label="Example icon button with a delete icon"
              (click)="deleteStory(story.storyId)">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
</div>